general:
  branches:
    ignore:
      - gh-pages

test:
  override:
    - cd sphinx-gallery && pip install -r requirements.txt && pip install seaborn sphinx_rtd_theme && python setup.py develop
    - git clone https://github.com/sphinx-gallery/sphinx-gallery.git
    - cd sphinx-gallery && python setup.py install
    - SPHX_GLR_THEME=rtd sphinx-build sphinx-gallery/doc rtd_html

deployment:
  staging:
    branch: master
    commands:
        - ./deploy.sh rtd_html
